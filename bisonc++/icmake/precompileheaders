string g_compiler;

void _precompile(string class)
{
    string classIH;

    classIH = class + ".ih";
    if (classIH younger class + ".ih.gch")
        run(g_compiler + " -x c++-header " + classIH);
}

void precompileHeaders()
{
    int idx;
    list classes;
    string class;

    classes = makelist(O_SUBDIR, "*");

    g_compiler = setOpt(CXX, "CXX") + " " + 
                                    setOpt(CXXFLAGS, "CXXFLAGS") + " ";

    _precompile("bisonc++");

    for (idx = sizeof(classes); idx--; )
    {
        class = classes[idx];

        chdir(class);

        _precompile(class);        

        chdir(g_cwd);
    }
}

